{"version":3,"sources":["Profile.js","Signin.js","App.js","index.js"],"names":["Profile","props","state","person","name","avatarUrl","username","newStatus","statuses","statusIndex","isLoading","this","handleSignOut","userSession","isSignInPending","className","src","id","isLocal","onClick","bind","value","onChange","e","handleNewStatusChange","placeholder","handleNewStatusSubmit","map","status","key","text","setState","Person","loadUserData","profile","event","target","saveNewStatus","statusText","trim","created_at","Date","now","unshift","putFile","JSON","stringify","encrypt","then","getFile","decrypt","file","parse","length","finally","match","params","lookupProfile","catch","error","console","log","options","fetchData","Component","Signin","handleSignIn","appConfig","AppConfig","UserSession","App","preventDefault","redirectToSignIn","signUserOut","window","location","origin","isUserSignedIn","Switch","Route","path","render","routeProps","handlePendingSignIn","userData","history","replaceState","document","title","ReactDOM","BrowserRouter","getElementById"],"mappings":"oZAQqBA,E,YACnB,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KAEDC,MAAQ,CACXC,OAAQ,CACNC,KADM,WAEJ,MAAO,aAETC,UAJM,WAKJ,MAZkB,4DAetBC,SAAU,GACVC,UAAW,GACXC,SAAU,GACVC,YAAa,EACbC,WAAW,GAhBI,E,sEAoBT,IAAD,SACgCC,KAAKV,MAApCW,EADD,EACCA,cAAeC,EADhB,EACgBA,YACfV,EAAWQ,KAAKT,MAAhBC,OACAG,EAAaK,KAAKT,MAAlBI,SAER,OACGO,EAAYC,mBAAqBX,EAClC,yBAAKY,UAAU,aACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,4BACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,kBACb,yBACEC,IAAMb,EAAOE,YAAcF,EAAOE,YApCxB,0DAqCVU,UAAU,qBACVE,GAAG,iBAEL,yBAAKF,UAAU,YACb,4BACE,0BAAME,GAAG,gBAAiBd,EAAOC,OAASD,EAAOC,OAC7C,oBAEN,8BAAOE,GACNK,KAAKO,WACJ,0CAEE,uBAAGC,QAAUP,EAAcQ,KAAKT,OAAhC,gBAMTA,KAAKO,WACJ,yBAAKH,UAAU,cACb,yBAAKA,UAAU,aACb,8BAAUA,UAAU,eAClBM,MAAOV,KAAKT,MAAMK,UAClBe,SAAU,SAAAC,GAAC,OAAI,EAAKC,sBAAsBD,IAC1CE,YAAY,0BAGhB,yBAAKV,UAAU,wBACb,4BACEA,UAAU,yBACVI,QAAS,SAAAI,GAAC,OAAI,EAAKG,sBAAsBH,KAF3C,YASN,yBAAKR,UAAU,sBACdJ,KAAKT,MAAMQ,WAAa,4CACxBC,KAAKT,MAAMM,SAASmB,KAAI,SAACC,GAAD,OACrB,yBAAKb,UAAU,SAASc,IAAKD,EAAOX,IACjCW,EAAOE,aAOX,O,2CAIS,IACZjB,EAAgBF,KAAKV,MAArBY,YACRF,KAAKoB,SAAS,CACZ5B,OAAQ,IAAI6B,SAAOnB,EAAYoB,eAAeC,SAC9C5B,SAAUO,EAAYoB,eAAe3B,a,4CAMrB6B,GACpBxB,KAAKoB,SAAS,CAACxB,UAAW4B,EAAMC,OAAOf,U,4CAGnBc,GACpBxB,KAAK0B,cAAc1B,KAAKT,MAAMK,WAC9BI,KAAKoB,SAAS,CACZxB,UAAW,O,oCAID+B,GAAa,IAAD,OAChBzB,EAAgBF,KAAKV,MAArBY,YACJL,EAAWG,KAAKT,MAAMM,SAEtBoB,EAAS,CACXX,GAAIN,KAAKT,MAAMO,cACfqB,KAAMQ,EAAWC,OACjBC,WAAYC,KAAKC,OAEnBlC,EAASmC,QAAQf,GAEjBf,EAAY+B,QAAQ,gBAAiBC,KAAKC,UAAUtC,GADpC,CAAEuC,SAAS,IAExBC,MAAK,WACJ,EAAKjB,SAAS,CACZvB,SAAUA,S,kCAIL,IAAD,OACFK,EAAgBF,KAAKV,MAArBY,YAER,GADAF,KAAKoB,SAAS,CAAErB,WAAW,IACvBC,KAAKO,UAAW,CAElBL,EAAYoC,QAAQ,gBADJ,CAAEC,SAAS,IAExBF,MAAK,SAACG,GACL,IAAI3C,EAAWqC,KAAKO,MAAMD,GAAQ,MAClC,EAAKpB,SAAS,CACZ5B,OAAQ,IAAI6B,SAAOnB,EAAYoB,eAAeC,SAC9C5B,SAAUO,EAAYoB,eAAe3B,SACrCG,YAAaD,EAAS6C,OACtB7C,SAAUA,OAGb8C,SAAQ,WACP,EAAKvB,SAAS,CAAErB,WAAW,WAE1B,CACL,IAAMJ,EAAWK,KAAKV,MAAMsD,MAAMC,OAAOlD,SAEzCmD,wBAAcnD,GACX0C,MAAK,SAACd,GACL,EAAKH,SAAS,CACZ5B,OAAQ,IAAI6B,SAAOE,GACnB5B,SAAUA,OAGboD,OAAM,SAACC,GACNC,QAAQC,IAAI,gCAEd,IAAMC,EAAU,CAAExD,SAAUA,EAAU4C,SAAS,GACpDrC,EAAYoC,QAAQ,gBAAiBa,GAClCd,MAAK,SAACG,GACL,IAAI3C,EAAWqC,KAAKO,MAAMD,GAAQ,MAClC,EAAKpB,SAAS,CACZtB,YAAaD,EAAS6C,OACtB7C,SAAUA,OAGbkD,OAAM,SAACC,GACNC,QAAQC,IAAI,+BAEbP,SAAQ,WACP,EAAKvB,SAAS,CAAErB,WAAW,U,0CAK9BC,KAAKoD,c,gCAIL,OAAOpD,KAAKV,MAAMsD,MAAMC,OAAOlD,a,GAnLI0D,aCNhBC,E,iLAET,IACAC,EAAiBvD,KAAKV,MAAtBiE,aAER,OACE,yBAAKnD,UAAU,gBAAgBE,GAAG,aAChC,wBAAIF,UAAU,mBAAd,sBACA,uBAAGA,UAAU,QACX,4BACEA,UAAU,yBACVE,GAAG,gBACHE,QAAU+C,EAAa9C,KAAKT,OAH9B,iC,GAT0BqD,aCO9BG,EAAY,IAAIC,YAAU,CAAC,cAAe,iBAC1CvD,EAAc,IAAIwD,cAAY,CAAEF,UAAWA,IAE5BG,E,qLAGN/C,GACXA,EAAEgD,iBACF1D,EAAY2D,qB,oCAGAjD,GACZA,EAAEgD,iBACF1D,EAAY4D,YAAYC,OAAOC,SAASC,U,+BAGhC,IAAD,OACP,OACE,yBAAK7D,UAAU,gBACb,yBAAKA,UAAU,sBACVF,EAAYgE,iBAEX,kBAACC,EAAA,EAAD,KACF,kBAACC,EAAA,EAAD,CACEC,KAAK,cACLC,OACE,SAAAC,GAAU,OACR,kBAAC,EAAD,eACErE,YAAaA,EACbD,cAAgB,EAAKA,eACjBsE,QATZ,kBAAC,EAAD,CAAQrE,YAAaA,EAAaqD,aAAevD,KAAKuD,mB,0CAsB3C,IAAD,OACdrD,EAAYC,mBACdD,EAAYsE,sBAAsBnC,MAAK,SAACoC,GACtCV,OAAOW,QAAQC,aAAa,GAAIC,SAASC,MAAO,KAChD,EAAKzD,SAAS,CAAEqD,SAAUA,W,GA5CDpB,a,cCHjCyB,IAASR,OAAO,kBAACS,EAAA,EAAD,KAAe,kBAAC,EAAD,OAAyBH,SAASI,eAAe,W","file":"static/js/main.cf670a4f.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Person,\n  lookupProfile\n} from 'blockstack';\n\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n \n    this.state = {\n      person: {\n        name() {\n          return 'Anonymous';\n        },\n        avatarUrl() {\n          return avatarFallbackImage;\n        },\n      },\n      username: \"\",\n      newStatus: \"\",\n      statuses: [],\n      statusIndex: 0,\n      isLoading: false\n    };\n  }\n\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    const { username } = this.state;\n   \n    return (\n      !userSession.isSignInPending() && person ?\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-offset-3 col-md-6\">\n            <div className=\"col-md-12\">\n              <div className=\"avatar-section\">\n                <img\n                  src={ person.avatarUrl() ? person.avatarUrl() : avatarFallbackImage }\n                  className=\"img-rounded avatar\"\n                  id=\"avatar-image\"\n                />\n                <div className=\"username\">\n                  <h1>\n                    <span id=\"heading-name\">{ person.name() ? person.name()\n                      : 'Nameless Person' }</span>\n                  </h1>\n                  <span>{username}</span>\n                  {this.isLocal() &&\n                    <span>\n                      &nbsp;|&nbsp;\n                      <a onClick={ handleSignOut.bind(this) }>(Logout)</a>\n                    </span>\n                  }\n                </div>\n              </div>\n            </div>\n            {this.isLocal() &&\n              <div className=\"new-status\">\n                <div className=\"col-md-12\">\n                  <textarea className=\"input-status\"\n                    value={this.state.newStatus}\n                    onChange={e => this.handleNewStatusChange(e)}\n                    placeholder=\"What's on your mind?\"\n                  />\n                </div>\n                <div className=\"col-md-12 text-right\">\n                  <button\n                    className=\"btn btn-primary btn-lg\"\n                    onClick={e => this.handleNewStatusSubmit(e)}\n                  >\n                    Submit\n                  </button>\n                </div>\n              </div>\n            }\n            <div className=\"col-md-12 statuses\">\n            {this.state.isLoading && <span>Loading...</span>}\n            {this.state.statuses.map((status) => (\n                <div className=\"status\" key={status.id}>\n                  {status.text}\n                </div>\n                )\n            )}\n            </div>\n          </div>\n        </div>\n      </div> : null\n    );\n    }\n\n  componentWillMount() {\n    const { userSession } = this.props;\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n      username: userSession.loadUserData().username\n    });\n  }\n\n\n\nhandleNewStatusChange(event) {\n  this.setState({newStatus: event.target.value})\n}\n\nhandleNewStatusSubmit(event) {\n  this.saveNewStatus(this.state.newStatus)\n  this.setState({\n    newStatus: \"\"\n  })\n}\n\nsaveNewStatus(statusText) {\n  const { userSession } = this.props\n  let statuses = this.state.statuses\n\n  let status = {\n    id: this.state.statusIndex++,\n    text: statusText.trim(),\n    created_at: Date.now()\n  }\n  statuses.unshift(status)\n  const options = { encrypt: false }\n  userSession.putFile('statuses.json', JSON.stringify(statuses), options)\n    .then(() => {\n      this.setState({\n        statuses: statuses\n      })\n    })\n}\nfetchData() {\n  const { userSession } = this.props\n  this.setState({ isLoading: true })\n  if (this.isLocal()) {\n    const options = { decrypt: false }\n    userSession.getFile('statuses.json', options)\n      .then((file) => {\n        var statuses = JSON.parse(file || '[]')\n        this.setState({\n          person: new Person(userSession.loadUserData().profile),\n          username: userSession.loadUserData().username,\n          statusIndex: statuses.length,\n          statuses: statuses,\n        })\n      })\n      .finally(() => {\n        this.setState({ isLoading: false })\n      })\n  } else {\n    const username = this.props.match.params.username\n\n    lookupProfile(username)\n      .then((profile) => {\n        this.setState({\n          person: new Person(profile),\n          username: username\n        })\n      })\n      .catch((error) => {\n        console.log('could not resolve profile')\n      })\n      const options = { username: username, decrypt: false }\n userSession.getFile('statuses.json', options)\n   .then((file) => {\n     var statuses = JSON.parse(file || '[]')\n     this.setState({\n       statusIndex: statuses.length,\n       statuses: statuses\n     })\n   })\n   .catch((error) => {\n     console.log('could not fetch statuses')\n   })\n   .finally(() => {\n     this.setState({ isLoading: false })\n   })\n  }\n}\ncomponentDidMount() {\n  this.fetchData()\n}\n\nisLocal() {\n  return this.props.match.params.username ? false : true\n}\n}","import React, { Component } from 'react';\n\nexport default class Signin extends Component {\n\n  render() {\n    const { handleSignIn } = this.props;\n\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">Hello, Blockstack!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signin-button\"\n            onClick={ handleSignIn.bind(this) }\n          >\n            Sign In with Blockstack\n          </button>\n        </p>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Profile from './Profile.js';\nimport Signin from './Signin.js';\nimport {\n  UserSession,\n  AppConfig\n} from 'blockstack';\n\nconst appConfig = new AppConfig(['store_write', 'publish_data'])\nconst userSession = new UserSession({ appConfig: appConfig })\n\nexport default class App extends Component {\n\n\n  handleSignIn(e) {\n    e.preventDefault();\n    userSession.redirectToSignIn();\n  }\n\n  handleSignOut(e) {\n    e.preventDefault();\n    userSession.signUserOut(window.location.origin);\n  }\n\n  render() {\n    return (\n      <div className=\"site-wrapper\">\n        <div className=\"site-wrapper-inner\">\n          { !userSession.isUserSignedIn() ?\n            <Signin userSession={userSession} handleSignIn={ this.handleSignIn } />\n            : <Switch>\n            <Route\n              path='/:username?'\n              render={\n                routeProps => \n                  <Profile \n                    userSession={userSession} \n                    handleSignOut={ this.handleSignOut } \n                    {...routeProps} \n                  />\n              }\n            />\n          </Switch>\n       \n       \n          }\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    if (userSession.isSignInPending()) {\n      userSession.handlePendingSignIn().then((userData) => {\n        window.history.replaceState({}, document.title, \"/\")\n        this.setState({ userData: userData})\n      });\n    }\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}