(this["webpackJsonphello-blockstack"]=this["webpackJsonphello-blockstack"]||[]).push([[0],{239:function(e,t,a){e.exports=a(511)},258:function(e,t){},260:function(e,t){},276:function(e,t){},278:function(e,t){},441:function(e,t){},509:function(e,t,a){},511:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(236),r=a.n(i),l=a(513),o=a(35),c=a(36),u=a(60),m=a(58),h=a(61),d=a(514),p=a(515),f=a(43),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return"https://s3.amazonaws.com/onename/avatar-placeholder.png"}},username:"",newStatus:"",statuses:[],statusIndex:0,isLoading:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.handleSignOut,n=t.userSession,i=this.state.person,r=this.state.username;return!n.isSignInPending()&&i?s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-offset-3 col-md-6"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("div",{className:"avatar-section"},s.a.createElement("img",{src:i.avatarUrl()?i.avatarUrl():"https://s3.amazonaws.com/onename/avatar-placeholder.png",className:"img-rounded avatar",id:"avatar-image"}),s.a.createElement("div",{className:"username"},s.a.createElement("h1",null,s.a.createElement("span",{id:"heading-name"},i.name()?i.name():"Nameless Person")),s.a.createElement("span",null,r),this.isLocal()&&s.a.createElement("span",null,"\xa0|\xa0",s.a.createElement("a",{onClick:a.bind(this)},"(Logout)"))))),this.isLocal()&&s.a.createElement("div",{className:"new-status"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("textarea",{className:"input-status",value:this.state.newStatus,onChange:function(t){return e.handleNewStatusChange(t)},placeholder:"What's on your mind?"})),s.a.createElement("div",{className:"col-md-12 text-right"},s.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:function(t){return e.handleNewStatusSubmit(t)}},"Submit"))),s.a.createElement("div",{className:"col-md-12 statuses"},this.state.isLoading&&s.a.createElement("span",null,"Loading..."),this.state.statuses.map((function(e){return s.a.createElement("div",{className:"status",key:e.id},e.text)})))))):null}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new f.Person(e.loadUserData().profile),username:e.loadUserData().username})}},{key:"handleNewStatusChange",value:function(e){this.setState({newStatus:e.target.value})}},{key:"handleNewStatusSubmit",value:function(e){this.saveNewStatus(this.state.newStatus),this.setState({newStatus:""})}},{key:"saveNewStatus",value:function(e){var t=this,a=this.props.userSession,n=this.state.statuses,s={id:this.state.statusIndex++,text:e.trim(),created_at:Date.now()};n.unshift(s);a.putFile("statuses.json",JSON.stringify(n),{encrypt:!1}).then((function(){t.setState({statuses:n})}))}},{key:"fetchData",value:function(){var e=this,t=this.props.userSession;if(this.setState({isLoading:!0}),this.isLocal()){t.getFile("statuses.json",{decrypt:!1}).then((function(a){var n=JSON.parse(a||"[]");e.setState({person:new f.Person(t.loadUserData().profile),username:t.loadUserData().username,statusIndex:n.length,statuses:n})})).finally((function(){e.setState({isLoading:!1})}))}else{var a=this.props.match.params.username;Object(f.lookupProfile)(a).then((function(t){e.setState({person:new f.Person(t),username:a})})).catch((function(e){console.log("could not resolve profile")}));var n={username:a,decrypt:!1};t.getFile("statuses.json",n).then((function(t){var a=JSON.parse(t||"[]");e.setState({statusIndex:a.length,statuses:a})})).catch((function(e){console.log("could not fetch statuses")})).finally((function(){e.setState({isLoading:!1})}))}}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"isLocal",value:function(){return!this.props.match.params.username}}]),t}(n.Component),g=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.handleSignIn;return s.a.createElement("div",{className:"panel-landing",id:"section-1"},s.a.createElement("h1",{className:"landing-heading"},"Hello, Blockstack!"),s.a.createElement("p",{className:"lead"},s.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signin-button",onClick:e.bind(this)},"Sign In with Blockstack")))}}]),t}(n.Component),S=new f.AppConfig(["store_write","publish_data"]),b=new f.UserSession({appConfig:S}),E=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),b.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),b.signUserOut(window.location.origin)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"site-wrapper"},s.a.createElement("div",{className:"site-wrapper-inner"},b.isUserSignedIn()?s.a.createElement(d.a,null,s.a.createElement(p.a,{path:"/:username?",render:function(t){return s.a.createElement(v,Object.assign({userSession:b,handleSignOut:e.handleSignOut},t))}})):s.a.createElement(g,{userSession:b,handleSignIn:this.handleSignIn})))}},{key:"componentDidMount",value:function(){var e=this;b.isSignInPending()&&b.handlePendingSignIn().then((function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})}))}}]),t}(n.Component);a(508),a(509);r.a.render(s.a.createElement(l.a,null,s.a.createElement(E,null)),document.getElementById("root"))}},[[239,1,2]]]);
//# sourceMappingURL=main.cf670a4f.chunk.js.map